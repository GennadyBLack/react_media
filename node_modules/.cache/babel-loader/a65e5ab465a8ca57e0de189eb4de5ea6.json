{"ast":null,"code":"import _slicedToArray from \"/home/gena/app/react_media/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/gena/app/react_media/src/node_modules/pages/article/index.js\";\nimport React, { useEffect, useContext, useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport useFetch from 'hooks/useFetch';\nimport Loading from 'components/loading';\nimport ErrorMessage from 'components/errorMessage';\nimport TagList from 'components/tagList';\nimport { CurrentUserContext } from 'contexts/currentUser';\n\nconst Article = props => {\n  const slug = props.match.params.slug;\n  const apiUrl = \"/articles/\".concat(slug);\n\n  const _useFetch = useFetch(apiUrl),\n        _useFetch2 = _slicedToArray(_useFetch, 2),\n        _useFetch2$ = _useFetch2[0],\n        fetchArticleResponse = _useFetch2$.response,\n        fetchArticleError = _useFetch2$.error,\n        fetchArticleIsLoading = _useFetch2$.isLoading,\n        doFetch = _useFetch2[1];\n\n  const _useFetch3 = useFetch(apiUrl),\n        _useFetch4 = _slicedToArray(_useFetch3, 2),\n        deleteArticleResponse = _useFetch4[0].response,\n        doDeleteArticle = _useFetch4[1];\n\n  const _useContext = useContext(CurrentUserContext),\n        _useContext2 = _slicedToArray(_useContext, 1),\n        currentUserState = _useContext2[0];\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isSuccessfullDelete = _useState2[0],\n        setIsSuccessfullDelete = _useState2[1];\n\n  const isAuthor = () => {\n    if (currentUserState.isLoggedIn === null || !fetchArticleResponse) {\n      return false;\n    }\n\n    return currentUserState.currentUser.username === fetchArticleResponse.article.author.username;\n  };\n\n  const deleteArticle = () => {\n    doDeleteArticle({\n      method: 'delete'\n    });\n  };\n\n  useEffect(() => {\n    doFetch();\n  }, [doFetch]);\n  useEffect(() => {\n    if (!deleteArticleResponse) {\n      return;\n    }\n\n    setIsSuccessfullDelete(true);\n  }, [deleteArticleResponse]);\n\n  if (isSuccessfullDelete) {\n    return React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"article-page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"banner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, !fetchArticleIsLoading && fetchArticleResponse && React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, fetchArticleResponse.article.title), React.createElement(\"div\", {\n    className: \"article-meta\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/profiles/\".concat(fetchArticleResponse.article.author.username),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: fetchArticleResponse.article.author.image,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/profiles/\".concat(fetchArticleResponse.article.author.username),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, fetchArticleResponse.article.author.username), React.createElement(\"span\", {\n    className: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, fetchArticleResponse.article.createdAt)), isAuthor() && React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/articles/\".concat(fetchArticleResponse.article.slug, \"/edit\"),\n    className: \"btn btn-outline-secondary btn-sm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"ion-edit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), \"Edit Article\"), React.createElement(\"button\", {\n    className: \"btn btn-outline-danger btn-sm\",\n    onClick: deleteArticle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"ion-trash-a\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), \"Delete Article\"))))), React.createElement(\"div\", {\n    className: \"container page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, fetchArticleIsLoading && React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), fetchArticleError && React.createElement(ErrorMessage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }), !fetchArticleIsLoading && fetchArticleResponse && React.createElement(\"div\", {\n    className: \"row article-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, fetchArticleResponse.article.body)), React.createElement(TagList, {\n    tags: fetchArticleResponse.article.tagList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  })));\n};\n\nexport default Article;","map":{"version":3,"sources":["/home/gena/app/react_media/src/node_modules/pages/article/index.js"],"names":["React","useEffect","useContext","useState","Link","Redirect","useFetch","Loading","ErrorMessage","TagList","CurrentUserContext","Article","props","slug","match","params","apiUrl","fetchArticleResponse","response","fetchArticleError","error","fetchArticleIsLoading","isLoading","doFetch","deleteArticleResponse","doDeleteArticle","currentUserState","isSuccessfullDelete","setIsSuccessfullDelete","isAuthor","isLoggedIn","currentUser","username","article","author","deleteArticle","method","title","image","createdAt","body","tagList"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,UAA1B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,SAAQC,IAAR,EAAcC,QAAd,QAA6B,kBAA7B;AAEA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAAQC,kBAAR,QAAiC,sBAAjC;;AAEA,MAAMC,OAAO,GAAGC,KAAK,IAAI;AACvB,QAAMC,IAAI,GAAGD,KAAK,CAACE,KAAN,CAAYC,MAAZ,CAAmBF,IAAhC;AACA,QAAMG,MAAM,uBAAgBH,IAAhB,CAAZ;;AAFuB,oBAUnBP,QAAQ,CAACU,MAAD,CAVW;AAAA;AAAA;AAAA,QAKTC,oBALS,eAKnBC,QALmB;AAAA,QAMZC,iBANY,eAMnBC,KANmB;AAAA,QAORC,qBAPQ,eAOnBC,SAPmB;AAAA,QASrBC,OATqB;;AAAA,qBAWsCjB,QAAQ,CAACU,MAAD,CAX9C;AAAA;AAAA,QAWLQ,qBAXK,iBAWfN,QAXe;AAAA,QAWmBO,eAXnB;;AAAA,sBAYIvB,UAAU,CAACQ,kBAAD,CAZd;AAAA;AAAA,QAYhBgB,gBAZgB;;AAAA,oBAa+BvB,QAAQ,CAAC,KAAD,CAbvC;AAAA;AAAA,QAahBwB,mBAbgB;AAAA,QAaKC,sBAbL;;AAevB,QAAMC,QAAQ,GAAG,MAAM;AACrB,QAAIH,gBAAgB,CAACI,UAAjB,KAAgC,IAAhC,IAAwC,CAACb,oBAA7C,EAAmE;AACjE,aAAO,KAAP;AACD;;AAED,WACES,gBAAgB,CAACK,WAAjB,CAA6BC,QAA7B,KACAf,oBAAoB,CAACgB,OAArB,CAA6BC,MAA7B,CAAoCF,QAFtC;AAID,GATD;;AAWA,QAAMG,aAAa,GAAG,MAAM;AAC1BV,IAAAA,eAAe,CAAC;AACdW,MAAAA,MAAM,EAAE;AADM,KAAD,CAAf;AAGD,GAJD;;AAMAnC,EAAAA,SAAS,CAAC,MAAM;AACdsB,IAAAA,OAAO;AACR,GAFQ,EAEN,CAACA,OAAD,CAFM,CAAT;AAIAtB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACuB,qBAAL,EAA4B;AAC1B;AACD;;AAEDI,IAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACD,GANQ,EAMN,CAACJ,qBAAD,CANM,CAAT;;AAQA,MAAIG,mBAAJ,EAAyB;AACvB,WAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,SACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACN,qBAAD,IAA0BJ,oBAA1B,IACC;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKA,oBAAoB,CAACgB,OAArB,CAA6BI,KAAlC,CADF,EAEE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AACE,IAAA,EAAE,sBAAepB,oBAAoB,CAACgB,OAArB,CAA6BC,MAA7B,CAAoCF,QAAnD,CADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE;AAAK,IAAA,GAAG,EAAEf,oBAAoB,CAACgB,OAArB,CAA6BC,MAA7B,CAAoCI,KAA9C;AAAqD,IAAA,GAAG,EAAC,EAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,EAME;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AACE,IAAA,EAAE,sBAAerB,oBAAoB,CAACgB,OAArB,CAA6BC,MAA7B,CAAoCF,QAAnD,CADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGGf,oBAAoB,CAACgB,OAArB,CAA6BC,MAA7B,CAAoCF,QAHvC,CADF,EAME;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGf,oBAAoB,CAACgB,OAArB,CAA6BM,SADhC,CANF,CANF,EAgBGV,QAAQ,MACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AACE,IAAA,EAAE,sBAAeZ,oBAAoB,CAACgB,OAArB,CAA6BpB,IAA5C,UADJ;AAEE,IAAA,SAAS,EAAC,kCAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAG,IAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,iBADF,EAQE;AACE,IAAA,SAAS,EAAC,+BADZ;AAEE,IAAA,OAAO,EAAEsB,aAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE;AAAG,IAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,mBARF,CAjBJ,CAFF,CAFJ,CADF,EA2CE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGd,qBAAqB,IAAI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD5B,EAEGF,iBAAiB,IAAI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFxB,EAGG,CAACE,qBAAD,IAA0BJ,oBAA1B,IACC;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,oBAAoB,CAACgB,OAArB,CAA6BO,IAAjC,CADF,CADF,EAIE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAEvB,oBAAoB,CAACgB,OAArB,CAA6BQ,OAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAJJ,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CA3CF,CADF;AA2DD,CA3GD;;AA6GA,eAAe9B,OAAf","sourcesContent":["import React, {useEffect, useContext, useState} from 'react'\nimport {Link, Redirect} from 'react-router-dom'\n\nimport useFetch from 'hooks/useFetch'\nimport Loading from 'components/loading'\nimport ErrorMessage from 'components/errorMessage'\nimport TagList from 'components/tagList'\nimport {CurrentUserContext} from 'contexts/currentUser'\n\nconst Article = props => {\n  const slug = props.match.params.slug\n  const apiUrl = `/articles/${slug}`\n  const [\n    {\n      response: fetchArticleResponse,\n      error: fetchArticleError,\n      isLoading: fetchArticleIsLoading\n    },\n    doFetch\n  ] = useFetch(apiUrl)\n  const [{response: deleteArticleResponse}, doDeleteArticle] = useFetch(apiUrl)\n  const [currentUserState] = useContext(CurrentUserContext)\n  const [isSuccessfullDelete, setIsSuccessfullDelete] = useState(false)\n\n  const isAuthor = () => {\n    if (currentUserState.isLoggedIn === null || !fetchArticleResponse) {\n      return false\n    }\n\n    return (\n      currentUserState.currentUser.username ===\n      fetchArticleResponse.article.author.username\n    )\n  }\n\n  const deleteArticle = () => {\n    doDeleteArticle({\n      method: 'delete'\n    })\n  }\n\n  useEffect(() => {\n    doFetch()\n  }, [doFetch])\n\n  useEffect(() => {\n    if (!deleteArticleResponse) {\n      return\n    }\n\n    setIsSuccessfullDelete(true)\n  }, [deleteArticleResponse])\n\n  if (isSuccessfullDelete) {\n    return <Redirect to=\"/\" />\n  }\n\n  return (\n    <div className=\"article-page\">\n      <div className=\"banner\">\n        {!fetchArticleIsLoading && fetchArticleResponse && (\n          <div className=\"container\">\n            <h1>{fetchArticleResponse.article.title}</h1>\n            <div className=\"article-meta\">\n              <Link\n                to={`/profiles/${fetchArticleResponse.article.author.username}`}\n              >\n                <img src={fetchArticleResponse.article.author.image} alt=\"\" />\n              </Link>\n              <div className=\"info\">\n                <Link\n                  to={`/profiles/${fetchArticleResponse.article.author.username}`}\n                >\n                  {fetchArticleResponse.article.author.username}\n                </Link>\n                <span className=\"date\">\n                  {fetchArticleResponse.article.createdAt}\n                </span>\n              </div>\n              {isAuthor() && (\n                <span>\n                  <Link\n                    to={`/articles/${fetchArticleResponse.article.slug}/edit`}\n                    className=\"btn btn-outline-secondary btn-sm\"\n                  >\n                    <i className=\"ion-edit\"></i>\n                    Edit Article\n                  </Link>\n                  <button\n                    className=\"btn btn-outline-danger btn-sm\"\n                    onClick={deleteArticle}\n                  >\n                    <i className=\"ion-trash-a\"></i>\n                    Delete Article\n                  </button>\n                </span>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n      <div className=\"container page\">\n        {fetchArticleIsLoading && <Loading />}\n        {fetchArticleError && <ErrorMessage />}\n        {!fetchArticleIsLoading && fetchArticleResponse && (\n          <div className=\"row article-content\">\n            <div>\n              <p>{fetchArticleResponse.article.body}</p>\n            </div>\n            <TagList tags={fetchArticleResponse.article.tagList} />\n          </div>\n        )}\n        <hr />\n      </div>\n    </div>\n  )\n}\n\nexport default Article\n"]},"metadata":{},"sourceType":"module"}